{include file="public/header" /}

				<div class="main-content">
					<div class="breadcrumbs" id="breadcrumbs">
						<script type="text/javascript">
							try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
						</script>

						{$crumbs.one}<!-- .breadcrumb -->

						<div class="nav-search" id="nav-search">
							<form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="icon-search nav-search-icon"></i>
								</span>
							</form>
						</div><!-- #nav-search -->
					</div>

					<div class="page-content">

						<div class="page-content">



						<!--主题-->
						{$crumbs.two}<!-- /.page-header -->
						<div class="row">
							<div class="col-xs-12">
								<form class="form-horizontal ajaxForm2" name="admin_group_runaccess" method="post" action="/admin/group/add">
									<div class="form-group">
										<label class="col-sm-2 control-label no-padding-right" for="form-field-1"> 用户组名：  </label>
										<div class="col-sm-10">
											<input type="text" name="type_name" id="title" value="" class="col-xs-10 col-sm-4" />
										</div>
									</div>
									<div class="space-4"></div>


									<table width="90%" border="0" align="center" cellpadding="0" cellspacing="0">

										<tr>
											<td height="30" style="border-bottom:#CCCCCC solid 1px; line-height:25px;">配置规则:<br />
												1、由于页面原因，权限分配为三级，同时控制左侧导航以及用户权限(注：超级管理已拥有所以权限，设置权限无效)<br />
										</tr>
										<tr>
											<td height="30" style="padding-left:10px;border-bottom:#CCCCCC solid 1px; line-height:25px; background-color:#F4F8FB">
												<label class="pos-rel">
													<input type="checkbox" class="ace ace-checkbox-2"  id='chkAll' onclick='CheckAll(this.form)' value="全选"/>
													<span class="lbl"> 权限全选</span>
												</label>
											</td>
										</tr>
										{foreach name="menus" item="vo"}
											<tr>
												<td height="40" style="border-bottom:#CCCCCC solid 1px;padding-left:10px;">
													<label>
														<input  name="rules[]" class="ace ace-checkbox-2 checkbox-parent" type="checkbox"  value="{$vo.rule_id}" dataid="id-{$vo['rule_id']}" /><span class="lbl"> <strong>{$vo.title}</strong></span>
													</label>
												</td>
											</tr>
											
											{foreach name="vo['child']" item="sub"}
												<tr>
													<td height="30" style="padding-left:30px;border-bottom:#E7EBF8 dashed 1px; color:#333333">
														<label>
															<input  name="rules[]" id="{$sub.rule_id}" class="ace ace-checkbox-2 checkbox-parent checkbox-child" type="checkbox"  value="{$sub.rule_id}" dataid="id-{$vo['rule_id']}-{$sub['rule_id']}" /><span class="lbl"> {$sub.title}</span>
														</label>
													</td>
												</tr>
												{if condition="!empty($sub.grandson)"}
												
													<tr>
														<td height="30" style="padding-left:70px;border-bottom:#E7EBF8 dashed 1px; color:#666666">
														{foreach name="sub['grandson']" item="subb"}
																<label class="thopen">
																	<input  name="rules[]" class="ace ace-checkbox-2 checkbox-child" type="checkbox"  id="{$subb.rule_id}" value="{$subb.rule_id}" dataid="id-{$vo['rule_id']}-{$sub['rule_id']}-{$subb['rule_id']}-{$subb['rule_id']}" />
																	<span class="lbl" style="margin-right:20px;"> {$subb.title}</span>
																</label>
															{/foreach}
														</td>
													</tr>
												
												{/if}
											{/foreach}
						
										{/foreach}
									</table>
									<div class="space-20"></div>
									<div class="form-group">
										<label class="col-sm-2 control-label no-padding-left" for="form-field-1" > 状态（显示/禁止）：  </label>
										<div class="col-sm-10">
											<input name="status" value="1" name="status"  class="ace ace-switch ace-switch-5" checked type="checkbox">
												<span class="lbl"></span>
										</div>
									</div>
									<div class="clearfix form-actions">
										<div class="col-md-offset-3 col-md-9">
											<button class="btn btn-info" type="submit">
												<i class="ace-icon fa fa-check bigger-110"></i>
												保存
											</button>

											&nbsp; &nbsp; &nbsp;
											<button class="btn" type="reset">
												<i class="ace-icon fa fa-undo bigger-110"></i>
												重置
											</button>
										</div>
									</div>
								</form>
							</div>
						</div>


					</div><!-- /.page-content -->

						
				</div><!-- /.main-content -->


	{include file="public/footer" /}
		<!-- basic scripts -->


		<!--[if IE]>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<![endif]-->

		<!--[if !IE]> -->

		<script type="text/javascript">
			window.jQuery || document.write("<script src='/public/effect/assets/js/jquery-2.0.3.min.js'>"+"<"+"/script>");
		</script>

		<!-- <![endif]-->

		<!--[if IE]>
<script type="text/javascript">
 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"/script>");
</script>
<![endif]-->

		<script type="text/javascript">
			if("ontouchend" in document) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script src="/public/effect/assets/js/bootstrap.min.js"></script>
		<script src="/public/effect/assets/js/typeahead-bs2.min.js"></script>

		<!-- page specific plugin scripts -->

		<script src="/public/effect/assets/js/jquery.dataTables.min.js"></script>
		<script src="/public/effect/assets/js/jquery.dataTables.bootstrap.js"></script>

		<!-- ace scripts -->

		<script src="/public/effect/assets/js/ace-elements.min.js"></script>
		<script src="/public/effect/assets/js/ace.min.js"></script>

		<!-- inline scripts related to this page -->
	<script>
		/* 菜单样式 */
$(function () {
    //插入header-nav
    $('#sidebar2').insertBefore('.page-content');
    $('.navbar-toggle[data-target="#sidebar2"]').insertAfter('#menu-toggler');
    //固定
    $(document).on('settings.ace.two_menu', function (e, event_name, event_val) {
        if (event_name == 'sidebar_fixed') {
            if ($('#sidebar').hasClass('sidebar-fixed')) {
                $('#sidebar2').addClass('sidebar-fixed');
                $('#navbar').addClass('h-navbar');
            }
            else {
                $('#sidebar2').removeClass('sidebar-fixed');
                $('#navbar').removeClass('h-navbar');
            }
        }
    }).triggerHandler('settings.ace.two_menu', ['sidebar_fixed', $('#sidebar').hasClass('sidebar-fixed')]);
});
/* 多选判断 */
function unselectall() {
    if (document.myform.chkAll.checked) {
        document.myform.chkAll.checked = document.myform.chkAll.checked & 0;
    }
}
function CheckAll(form) {
    for (var i = 0; i < form.elements.length; i++) {
        var e = form.elements[i];
        if (e.Name != 'chkAll' && e.disabled == false) {
            e.checked = form.chkAll.checked;
        }
    }
}
/* 权限配置 */
$(function () {
    //动态选择框，上下级选中状态变化
    $('input.checkbox-parent').on('change', function () {
        var dataid = $(this).attr("dataid");
        $('input[dataid^=' + dataid + ']').prop('checked', $(this).is(':checked'));
    });
    $('input.checkbox-child').on('change', function () {
        var dataid = $(this).attr("dataid");
        dataid = dataid.substring(0, dataid.lastIndexOf("-"));
        var parent = $('input[dataid=' + dataid + ']');
        if ($(this).is(':checked')) {
            parent.prop('checked', true);
            //循环到顶级
            while (dataid.lastIndexOf("-") != 2) {
                dataid = dataid.substring(0, dataid.lastIndexOf("-"));
                parent = $('input[dataid=' + dataid + ']');
                parent.prop('checked', true);
            }
        } else {
            //父级
            if ($('input[dataid^=' + dataid + '-]:checked').length == 0) {
                parent.prop('checked', false);
                //循环到顶级
                while (dataid.lastIndexOf("-") != 2) {
                    dataid = dataid.substring(0, dataid.lastIndexOf("-"));
                    parent = $('input[dataid=' + dataid + ']');
                    if ($('input[dataid^=' + dataid + '-]:checked').length == 0) {
                        parent.prop('checked', false);
                    }
                }
            }
        }
    });
});
	</script>
		
	